\hypertarget{classAstarPlanner2d}{}\doxysection{Astar\+Planner2d Class Reference}
\label{classAstarPlanner2d}\index{AstarPlanner2d@{AstarPlanner2d}}


A$\ast$ planner for 2d maps.  




{\ttfamily \#include $<$astar\+\_\+planner.\+h$>$}

Inheritance diagram for Astar\+Planner2d\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classAstarPlanner2d}
\end{center}
\end{figure}
\doxysubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structAstarPlanner2d_1_1AstarNode}{Astar\+Node}}
\begin{DoxyCompactList}\small\item\em A$\ast$ node containing information about parent indices and computed costs. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classAstarPlanner2d_a3411bab4e3731a86de0032c84e98ef68}{Astar\+Planner2d}} ()
\begin{DoxyCompactList}\small\item\em Default constructor. \end{DoxyCompactList}\item 
std\+::vector$<$ \mbox{\hyperlink{point__types_8h_ae8af601f9c656ff8a3202809164b126d}{Point2f}} $>$ \mbox{\hyperlink{classAstarPlanner2d_a8cd773a748f60082f5afc39eb5d82e94}{compute\+\_\+plan}} (\mbox{\hyperlink{point__types_8h_ae8af601f9c656ff8a3202809164b126d}{Point2f}} \&start, \mbox{\hyperlink{point__types_8h_ae8af601f9c656ff8a3202809164b126d}{Point2f}} \&goal)
\begin{DoxyCompactList}\small\item\em computes path using A$\ast$ search from start to end points \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Types}
\begin{DoxyCompactItemize}
\item 
typedef std\+::pair$<$ \mbox{\hyperlink{point__types_8h_ac279483d1fec05461f3a6f954334b129}{Point2i}}, std\+::pair$<$ float, float $>$ $>$ \mbox{\hyperlink{classAstarPlanner2d_ab31d6fbbd750b8c4e501b60332a519ee}{P\+Q\+\_\+\+Element}}
\begin{DoxyCompactList}\small\item\em typedef to store elements in a priority queue \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ \mbox{\hyperlink{point__types_8h_ac279483d1fec05461f3a6f954334b129}{Point2i}} $>$ \mbox{\hyperlink{classAstarPlanner2d_a7c8a976baf4de3936cabcf8b472a495c}{astar}} (\mbox{\hyperlink{point__types_8h_ac279483d1fec05461f3a6f954334b129}{Point2i}} \&start, \mbox{\hyperlink{point__types_8h_ac279483d1fec05461f3a6f954334b129}{Point2i}} \&goal)
\begin{DoxyCompactList}\small\item\em A$\ast$ search method. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Additional Inherited Members}


\doxysubsection{Detailed Description}
A$\ast$ planner for 2d maps. 

Definition at line 13 of file astar\+\_\+planner.\+h.



\doxysubsection{Member Typedef Documentation}
\mbox{\Hypertarget{classAstarPlanner2d_ab31d6fbbd750b8c4e501b60332a519ee}\label{classAstarPlanner2d_ab31d6fbbd750b8c4e501b60332a519ee}} 
\index{AstarPlanner2d@{AstarPlanner2d}!PQ\_Element@{PQ\_Element}}
\index{PQ\_Element@{PQ\_Element}!AstarPlanner2d@{AstarPlanner2d}}
\doxysubsubsection{\texorpdfstring{PQ\_Element}{PQ\_Element}}
{\footnotesize\ttfamily typedef std\+::pair$<$\mbox{\hyperlink{point__types_8h_ac279483d1fec05461f3a6f954334b129}{Point2i}}, std\+::pair$<$float, float$>$ $>$ \mbox{\hyperlink{classAstarPlanner2d_ab31d6fbbd750b8c4e501b60332a519ee}{Astar\+Planner2d\+::\+P\+Q\+\_\+\+Element}}\hspace{0.3cm}{\ttfamily [private]}}



typedef to store elements in a priority queue 



Definition at line 66 of file astar\+\_\+planner.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classAstarPlanner2d_a3411bab4e3731a86de0032c84e98ef68}\label{classAstarPlanner2d_a3411bab4e3731a86de0032c84e98ef68}} 
\index{AstarPlanner2d@{AstarPlanner2d}!AstarPlanner2d@{AstarPlanner2d}}
\index{AstarPlanner2d@{AstarPlanner2d}!AstarPlanner2d@{AstarPlanner2d}}
\doxysubsubsection{\texorpdfstring{AstarPlanner2d()}{AstarPlanner2d()}}
{\footnotesize\ttfamily Astar\+Planner2d\+::\+Astar\+Planner2d (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Default constructor. 



Definition at line 35 of file astar\+\_\+planner.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{35 \{\}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classAstarPlanner2d_a8cd773a748f60082f5afc39eb5d82e94}\label{classAstarPlanner2d_a8cd773a748f60082f5afc39eb5d82e94}} 
\index{AstarPlanner2d@{AstarPlanner2d}!compute\_plan@{compute\_plan}}
\index{compute\_plan@{compute\_plan}!AstarPlanner2d@{AstarPlanner2d}}
\doxysubsubsection{\texorpdfstring{compute\_plan()}{compute\_plan()}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{point__types_8h_ae8af601f9c656ff8a3202809164b126d}{Point2f}}$>$ Astar\+Planner2d\+::compute\+\_\+plan (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{point__types_8h_ae8af601f9c656ff8a3202809164b126d}{Point2f}} \&}]{start,  }\item[{\mbox{\hyperlink{point__types_8h_ae8af601f9c656ff8a3202809164b126d}{Point2f}} \&}]{goal }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



computes path using A$\ast$ search from start to end points 



Implements \mbox{\hyperlink{classBaseGlobalPlanner2d_af69f65aa9c026419114ee117eb2c4d04}{Base\+Global\+Planner2d}}.



Definition at line 40 of file astar\+\_\+planner.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{41     \{}
\DoxyCodeLine{42         \textcolor{comment}{// transfrom points in world coordinates to the discritized map indices}}
\DoxyCodeLine{43         \textcolor{keywordtype}{int} si=0, sj=0, gi=0, gj=0;}
\DoxyCodeLine{44         \textcolor{keywordflow}{if}(\mbox{\hyperlink{classBaseGlobalPlanner2d_aaf30bec93eb0085ee285e5682d89488a}{\_map}}.\mbox{\hyperlink{classOccupancyGrid2d_add5aad4b60a60e6e93ebdd4db1b13073}{xy\_to\_ij}}(start[0], start[1], si, sj) \&\& \mbox{\hyperlink{classBaseGlobalPlanner2d_aaf30bec93eb0085ee285e5682d89488a}{\_map}}.\mbox{\hyperlink{classOccupancyGrid2d_add5aad4b60a60e6e93ebdd4db1b13073}{xy\_to\_ij}}(goal[0], goal[1], gi, gj))}
\DoxyCodeLine{45         \{}
\DoxyCodeLine{46             \textcolor{keywordflow}{if}(\mbox{\hyperlink{classBaseGlobalPlanner2d_aaf30bec93eb0085ee285e5682d89488a}{\_map}}(si, sj)==0 \&\& \mbox{\hyperlink{classBaseGlobalPlanner2d_aaf30bec93eb0085ee285e5682d89488a}{\_map}}(gi, gj)==0)}
\DoxyCodeLine{47             \{}
\DoxyCodeLine{48                 \mbox{\hyperlink{classPoint}{Point2i}} start\_i(\{si, sj\});}
\DoxyCodeLine{49                 \mbox{\hyperlink{classPoint}{Point2i}} goal\_i(\{gi, gj\});}
\DoxyCodeLine{50                 \textcolor{comment}{// A* search from start to goal}}
\DoxyCodeLine{51                 std::vector<Point2i> path = \mbox{\hyperlink{classAstarPlanner2d_a7c8a976baf4de3936cabcf8b472a495c}{astar}}(start\_i, goal\_i);}
\DoxyCodeLine{52                 std::vector<Point2f> path\_f;}
\DoxyCodeLine{53                 \textcolor{keywordflow}{for}(\textcolor{keyword}{auto} path\_point: path) }
\DoxyCodeLine{54                 \{}
\DoxyCodeLine{55                     \mbox{\hyperlink{classPoint}{Point2f}} path\_point\_f;}
\DoxyCodeLine{56                     \mbox{\hyperlink{classBaseGlobalPlanner2d_aaf30bec93eb0085ee285e5682d89488a}{\_map}}.\mbox{\hyperlink{classOccupancyGrid2d_ae868f67f9a98f53c007f61f848371813}{ij\_to\_xy}}(path\_point[0], path\_point[1], path\_point\_f[0], path\_point\_f[1]);}
\DoxyCodeLine{57                     path\_f.push\_back(path\_point\_f);}
\DoxyCodeLine{58                 \}}
\DoxyCodeLine{59                 \textcolor{keywordflow}{return} path\_f;}
\DoxyCodeLine{60             \}}
\DoxyCodeLine{61         \}}
\DoxyCodeLine{62         \textcolor{keywordflow}{return} std::vector<Point2f>();}
\DoxyCodeLine{63     \}}

\end{DoxyCode}
\mbox{\Hypertarget{classAstarPlanner2d_a7c8a976baf4de3936cabcf8b472a495c}\label{classAstarPlanner2d_a7c8a976baf4de3936cabcf8b472a495c}} 
\index{AstarPlanner2d@{AstarPlanner2d}!astar@{astar}}
\index{astar@{astar}!AstarPlanner2d@{AstarPlanner2d}}
\doxysubsubsection{\texorpdfstring{astar()}{astar()}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{point__types_8h_ac279483d1fec05461f3a6f954334b129}{Point2i}}$>$ Astar\+Planner2d\+::astar (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{point__types_8h_ac279483d1fec05461f3a6f954334b129}{Point2i}} \&}]{start,  }\item[{\mbox{\hyperlink{point__types_8h_ac279483d1fec05461f3a6f954334b129}{Point2i}} \&}]{goal }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}}



A$\ast$ search method. 



Definition at line 69 of file astar\+\_\+planner.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{70     \{}
\DoxyCodeLine{71         \textcolor{keywordtype}{int} width = \mbox{\hyperlink{classBaseGlobalPlanner2d_aaf30bec93eb0085ee285e5682d89488a}{\_map}}.\mbox{\hyperlink{classOccupancyGrid2d_a6fa6ba4bd6d9a05f220c6ae5d7a9bbad}{get\_width}}(), height = \mbox{\hyperlink{classBaseGlobalPlanner2d_aaf30bec93eb0085ee285e5682d89488a}{\_map}}.\mbox{\hyperlink{classOccupancyGrid2d_ad606b838abdf655b05123dc22fd537d4}{get\_height}}();}
\DoxyCodeLine{72         \textcolor{comment}{// vector of A* nodes with info about parent indices and computed costs}}
\DoxyCodeLine{73         std::vector<AstarNode> nodes(width*height, AstarNode());}
\DoxyCodeLine{74         \textcolor{comment}{// comparator for elements in the priority queue}}
\DoxyCodeLine{75         \textcolor{keyword}{auto} comp = [](\mbox{\hyperlink{classAstarPlanner2d_ab31d6fbbd750b8c4e501b60332a519ee}{PQ\_Element}}\& a, \mbox{\hyperlink{classAstarPlanner2d_ab31d6fbbd750b8c4e501b60332a519ee}{PQ\_Element}}\& b)\{}
\DoxyCodeLine{76             \textcolor{keywordflow}{if}(a.second.first == b.second.first) \textcolor{keywordflow}{return} a.second.second > b.second.second;}
\DoxyCodeLine{77             \textcolor{keywordflow}{return} a.second.first > b.second.first;}
\DoxyCodeLine{78         \};}
\DoxyCodeLine{79         std::priority\_queue<PQ\_Element, std::vector<PQ\_Element>, decltype(comp)> pq(comp);}
\DoxyCodeLine{80         }
\DoxyCodeLine{81         \textcolor{keywordtype}{int} ind = start[0]*width+start[1];}
\DoxyCodeLine{82         nodes[ind].cost\_to\_reach = 0;}
\DoxyCodeLine{83         nodes[ind].heuristic\_cost = goal.\mbox{\hyperlink{classPoint_a6c7c73a9b2a970f8b91e8c2d647b60c3}{distance\_to}}(start);}
\DoxyCodeLine{84         nodes[ind].cost = nodes[ind].cost\_to\_reach + nodes[ind].heuristic\_cost;}
\DoxyCodeLine{85         pq.push(\{start, std::pair<float, float>\{nodes[ind].cost, nodes[ind].cost\_to\_reach\}\});}
\DoxyCodeLine{86 }
\DoxyCodeLine{87         \textcolor{keywordtype}{bool} goal\_reached = \textcolor{keyword}{false};}
\DoxyCodeLine{88         \textcolor{keywordflow}{while}(!pq.empty())}
\DoxyCodeLine{89         \{}
\DoxyCodeLine{90             \mbox{\hyperlink{classAstarPlanner2d_ab31d6fbbd750b8c4e501b60332a519ee}{PQ\_Element}} cur = pq.top();}
\DoxyCodeLine{91             pq.pop();}
\DoxyCodeLine{92 }
\DoxyCodeLine{93             \textcolor{keywordflow}{if}(goal.\mbox{\hyperlink{classPoint_a636251d703d8af8ba5ccc91faa0dad87}{is\_equal\_to}}(cur.first))}
\DoxyCodeLine{94             \{}
\DoxyCodeLine{95                 goal\_reached = \textcolor{keyword}{true};}
\DoxyCodeLine{96                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{97             \}}
\DoxyCodeLine{98 }
\DoxyCodeLine{99             \textcolor{keywordtype}{int} cur\_ind = cur.first[0]*width+cur.first[1];}
\DoxyCodeLine{100             \textcolor{comment}{// check neighbors if they are valid and not occupied and add to queue if they satisfy the validity conditions}}
\DoxyCodeLine{101             \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i=-\/1; i<=1; ++i)}
\DoxyCodeLine{102             \{}
\DoxyCodeLine{103                 \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} j=-\/1; j<=1; ++j)}
\DoxyCodeLine{104                 \{}
\DoxyCodeLine{105                     \textcolor{keywordflow}{if}(i!=0 || j!=0)}
\DoxyCodeLine{106                     \{}
\DoxyCodeLine{107                         \mbox{\hyperlink{classPoint}{Point2i}} neighbor(\{cur.first[0]+i, cur.first[1]+j\});}
\DoxyCodeLine{108                         \textcolor{keywordflow}{if}(neighbor[0]>=0 \&\& neighbor[0]<height \&\& neighbor[1]>=0 \&\& neighbor[1]<width)}
\DoxyCodeLine{109                         \{}
\DoxyCodeLine{110                             \textcolor{keywordflow}{if}(\mbox{\hyperlink{classBaseGlobalPlanner2d_aaf30bec93eb0085ee285e5682d89488a}{\_map}}(neighbor[0], neighbor[1])==0)}
\DoxyCodeLine{111                             \{}
\DoxyCodeLine{112                                 ind = neighbor[0]*width+neighbor[1];}
\DoxyCodeLine{113                                 \textcolor{keywordtype}{float} cost\_to\_reach = nodes[cur\_ind].cost\_to\_reach + neighbor.\mbox{\hyperlink{classPoint_a6c7c73a9b2a970f8b91e8c2d647b60c3}{distance\_to}}(cur.first);}
\DoxyCodeLine{114                                 \textcolor{keywordtype}{float} heuristic\_cost = goal.\mbox{\hyperlink{classPoint_a6c7c73a9b2a970f8b91e8c2d647b60c3}{distance\_to}}(neighbor);}
\DoxyCodeLine{115                                 \textcolor{keywordtype}{float} cost = cost\_to\_reach + heuristic\_cost;}
\DoxyCodeLine{116                                 \textcolor{keywordflow}{if}(cost < nodes[ind].cost)}
\DoxyCodeLine{117                                 \{}
\DoxyCodeLine{118                                     pq.push(\{neighbor, std::pair<float, float>\{cost, cost\_to\_reach\}\});}
\DoxyCodeLine{119                                     nodes[ind].parent = cur.first;}
\DoxyCodeLine{120                                     nodes[ind].cost\_to\_reach = cost\_to\_reach;}
\DoxyCodeLine{121                                     nodes[ind].heuristic\_cost = heuristic\_cost;}
\DoxyCodeLine{122                                     nodes[ind].cost = cost;}
\DoxyCodeLine{123                                 \}}
\DoxyCodeLine{124                             \}}
\DoxyCodeLine{125                         \}}
\DoxyCodeLine{126                     \}}
\DoxyCodeLine{127                 \}}
\DoxyCodeLine{128             \}}
\DoxyCodeLine{129         \}}
\DoxyCodeLine{130 }
\DoxyCodeLine{131         \textcolor{comment}{// retrieve path by tracing back parent indices from goal cell}}
\DoxyCodeLine{132         std::vector<Point2i> path;}
\DoxyCodeLine{133         \textcolor{keywordflow}{if}(goal\_reached)}
\DoxyCodeLine{134         \{}
\DoxyCodeLine{135             \textcolor{keyword}{auto} path\_point = goal;}
\DoxyCodeLine{136             path.push\_back(path\_point);}
\DoxyCodeLine{137             ind = path\_point[0]*width+path\_point[1];}
\DoxyCodeLine{138             \textcolor{keywordflow}{while}(!(nodes[ind].parent[0]==-\/1 \&\& nodes[ind].parent[1]==-\/1))}
\DoxyCodeLine{139             \{}
\DoxyCodeLine{140                 path\_point = nodes[ind].parent;}
\DoxyCodeLine{141                 path.push\_back(path\_point);}
\DoxyCodeLine{142                 ind = path\_point[0]*width+path\_point[1];}
\DoxyCodeLine{143             \}}
\DoxyCodeLine{144             std::reverse(path.begin(), path.end());}
\DoxyCodeLine{145         \}}
\DoxyCodeLine{146         \textcolor{keywordflow}{return} path;}
\DoxyCodeLine{147     \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
include/planning\+\_\+lib/\mbox{\hyperlink{astar__planner_8h}{astar\+\_\+planner.\+h}}\end{DoxyCompactItemize}
